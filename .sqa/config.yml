# .sqa/config.yml - jenkins-pipeline-library configuration file
config:
  credentials:
  - id: synergy_dockerhub_bot_pass
    password_var: JPL_DOCKERPASS
    username_var: JPL_DOCKERUSER

  project_repos: 
    saps-common:
      repo: 'https://github.com/EOSC-synergy/saps-common'
      branch: develop

environment:
  JPL_DOCKERPUSH: common-build

sqa_criteria:
   qc_style:
     repos:
       saps-common:
         container: common-build
         commands:
           - mvn -f /saps-common-repo/pom.xml spotless:check

   qc_coverage:
     repos:
       saps-common:
         container: common-testing
         commands:
           - mvn -f /saps-common-repo/pom.xml -B -DskipTests clean package
           - mvn -f /saps-common-repo/pom.xml test

   qc_doc:
     repos:
       saps-common:
         container: common-docs
         commands:
           - pip install recommonmark
           - make html -C /saps-common-repo/docs/

   qc_security:
     repos:
       saps-scheduler:
         container: common-testing
         commands:
           - mvn -f /saps-common-repo/pom.xml -B -DskipTests clean package com.github.spotbugs:spotbugs-maven-plugin:check

